version: "3.1"

stories:
- story: type transition
  steps:
  - intent: navigation
    entities:
    - page: home
  - slot_was_set:
    - page: home
  - action: action_page_change

- story: remove from the cart with index
  steps:
  - intent: remove_cart
    entities:
    - index: 5th
  - slot_was_set:
    - index: 5th
  - action: action_remove

- story: clear the entire cart
  steps:
  - intent: remove_cart
  - action: action_remove

- story: direct add to cart with the color
  steps:
  - intent: buy
    entities:
    - product: mules
    - color: black
  - slot_was_set:
    - product: mules
  - slot_was_set:
    - color: black
  - action: utter_more_size
  - intent: search
    entities:
    - size: 9
  - slot_was_set:
    - size: 9
  - action: action_add_cart

- story: direct add to cart without the color
  steps:
  - intent: buy
    entities:
    - product: mules
  - slot_was_set:
    - product: mules
  - action: utter_more_size
  - intent: search
    entities:
    - size: 9
  - slot_was_set:
    - size: 9
  - action: action_add_cart

- story: applying all filters
  steps:
  - intent: search
    entities:
    - type: loafers
    - color: black
    - price: "200"
    - tag: formal
  - slot_was_set:
    - type: loafers
  - slot_was_set:
    - color: black
  - slot_was_set:
    - price: "200"
  - slot_was_set:
    - tag: formal
  - action: action_filter
  - checkpoint: check_question

- story: Suggestive story
  steps:
  - intent: search
    entities:
    - tag: comfortable
  - slot_was_set:
    - tag: comfortable
  - action: utter_budget
  - checkpoint: user_tells_price

- story: user does tell price
  steps:
  - checkpoint: user_tells_price
  - intent: search
    entities:
    - price: "200"
  - slot_was_set:
    - price: "200"
  - action: action_filter
  - checkpoint: check_question

- story: user does not tell price
  steps:
  - checkpoint: user_tells_price
  - intent: deny
  - action: action_filter
  - checkpoint: check_question

- story: applying color filter only
  steps:
  - intent: search
    entities:
    - type: loafers
    - color: brown
  - slot_was_set:
    - type: loafers
  - slot_was_set:
    - color: black
  - action: utter_budget
  - intent: search
    entities:
    - price: 200
  - slot_was_set:
    - price: 200
  - action: action_filter
  - checkpoint: check_question

- story: Main story
  steps:
  - intent: search
    entities:
    - type: loafers
  - slot_was_set:
    - type: loafers
  - action: utter_more_color
  - intent: search
    entities:
    - color: black
  - slot_was_set:
    - color: black
  - action: action_filter
  - checkpoint: check_question

- story: user adds color filter
  steps:
  - checkpoint: check_question
  - intent: search
    entities:
    - color: brown
  - slot_was_set:
    - color: brown
  - action: action_filter

- story: user does not like the item
  steps:
  - checkpoint: check_question
  - intent: deny
  - action: utter_confusion

- story: user opens an item
  steps:
  - checkpoint: check_question
  - intent: open_item
    entities:
    - product: mules
  - slot_was_set:
    - product: mules
  - action: action_open_item
  - checkpoint: check_user_response

- story: user does not want the product
  steps:
  - checkpoint: check_user_response
  - intent: deny
  - action: utter_confusion

- story: user adds directly to cart after opening item
  steps:
  - checkpoint: check_user_response
  - intent: buy
  - action: utter_more_size
  - intent: search
    entities:
    - size: six
  - slot_was_set:
    - size: six
  - action: utter_discount
  - checkpoint: check_discount_answer

- story: user changes the color and then adds to cart
  steps:
  - checkpoint: check_user_response
  - intent: search
    entities:
    - color: black
  - slot_was_set:
    - color: black
  - action: action_item_color
  - intent: buy
  - action: utter_more_size
  - intent: search
    entities:
      - size: 9
  - slot_was_set:
    - size: 9
  - action: utter_discount
  - checkpoint: check_discount_answer

- story: user says yes to deal
  steps:
  - checkpoint: check_discount_answer
  - intent: affirm
  - action: utter_offer_items
  - intent: buy
  - action: action_add_cart

- story: user says no to deal
  steps:
  - checkpoint: check_discount_answer
  - intent: deny
  - action: action_add_cart

- story: removing all filters
  steps:
  - checkpoint: check_question
  - intent: remove_filter
  - action: action_remove_filter

- story: removing specific filters
  steps:
  - checkpoint: check_question
  - intent: remove_filter
    entities:
    - filter: price
  - slot_was_set:
    - filter: price
  - action: action_remove_filter